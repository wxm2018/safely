<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>测试视频上传</title>
</head>
<script src="../static/admin/layui/layui.all.js" type="text/javascript" charset="utf-8"></script>

<body>
	<form action="http:127.0.0.1:8080/device/getImage" method="post" enctype="multipart/form-data">
		<input type="text" name="username"><br>
		<input type="file" name="filename"><br>
		<input type="submit" value="上传文件">
	</form>


    <body>
    <img id="img1" src="images/image/QQQQQQQQ.jpg">
    <p id="p1">loading...</p>
    <script type="text/javascript">
        var $=layui.jquery;

        var imgurl = $("#img1").attr('src');
        timer = setInterval("CheckImgExists(imgurl)", 500);
        function CheckImgExists(imgurl) {
            var ImgObj = new Image(); //判断图片是否存在
            ImgObj.src = imgurl;
            if (ImgObj.fileSize > 0 || (ImgObj.width > 0 && ImgObj.height > 0)) {
                clearInterval(timer);
                return true;
            } else {
                return false;
            }
        }
        setTimeout(function () {
            alert("监控预览超时，请检查设备是否正常启动且设备id是否正确！");
            clearInterval(timer);
        },30000);

    </script>



</body>
</html>